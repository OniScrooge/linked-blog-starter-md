An algorithm with the $O(n^2)$ time complexity